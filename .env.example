######################################################################
# getty – Environment variables (Wallet‑Only Mode Focus)
#
# Copy to .env and adjust. Legacy namespace token system (/api/session/*, public/admin tokens, ?token=) was removed; wallet sessions + Redis provide isolation.
######################################################################

########################################
# Core
########################################

# Environment: 'production' (hosted) / 'development' (local)
NODE_ENV=production

# Server port (default 3000)
PORT=3000

# Secure cookies in production (HTTPS). Use 0 locally.
COOKIE_SECURE=0

# Directory for config JSON files (defaults to ./config if unset)
# GETTY_CONFIG_DIR=./config

# (Wallet) HMAC secret for signing the getty_wallet_session cookie. If unset a
# random secret is generated at runtime (sessions invalidated on restart).
# Strongly set this in production.
# GETTY_SESSION_SECRET=change-me-long-hex-or-base64url

########################################
# Wallet Session (Wallet‑Only Mode)
########################################

# Enable wallet multi-tenant auth (nonce + signature -> cookie namespace)
GETTY_MULTI_TENANT_WALLET=1

# Required on localhost if you want the livestream notification to be posted to Discord. The hash is inside the tenant folder
# GETTY_AUTO_LIVE_TENANT_HASH=hashwallet
# GETTY_VERBOSE_AUTO_LIVE=1

# TTL (seconds) for wallet session cookie (default 86400 = 24h)
# WALLET_SESSION_TTL_SECONDS=86400

# Domain override embedded in signed login message (defaults to request Host)
# GETTY_LOGIN_DOMAIN=localhost:3000

# Rate limiting (defaults shown) for wander auth endpoints
# GETTY_WANDER_RL_WINDOW_MS=60000
# GETTY_WANDER_RL_NONCE_MAX=30
# GETTY_WANDER_RL_VERIFY_MAX=20

# Debug verbose wallet auth (nonce/verify flow)
# GETTY_WALLET_AUTH_DEBUG=1

# TEST ONLY: Allow dummy TEST signature (never enable in prod; requires NODE_ENV=test)
# GETTY_WALLET_AUTH_ALLOW_DUMMY=1

## ------------------------------------------------------------
## Session / Namespaces
## ------------------------------------------------------------
## (Legacy namespace model removed.) Redis still enables multi-process
## persistence & shared state; keep using REDIS_URL in hosted.

# Redis (required for hosted multi-instance, rate-limit persistence, audit)
# REDIS_URL=redis://user:pass@host:6379/0

# (Optional compatibility) admin namespace write gate – rarely needed in wallet-only
GETTY_REQUIRE_ADMIN_WRITE=1

########################################
# Security / Hardening
########################################

# Strict local admin (only 127.0.0.1 / ::1 trusted automatically)
# GETTY_STRICT_LOCAL_ADMIN=1

# Extra trusted IPs (comma separated) when strict=0
# GETTY_ALLOW_IPS=127.0.0.1,::1

# Enforce that only owner token holder can write
# GETTY_ENFORCE_OWNER_WRITES=0

# Relax remote admin (expose sensitive fields to remote sessions)
# GETTY_RELAX_REMOTE_ADMIN=0

# Disable global fallback namespace in multi-tenant wallet mode
# GETTY_DISABLE_GLOBAL_FALLBACK=1

# Owner token (immutable if set here). If omitted can be claimed via API.
# GETTY_OWNER_TOKEN=your-static-owner-token

# CSRF protection (fetch token via GET /api/admin/csrf)
# GETTY_ENABLE_CSRF=1
# GETTY_CSRF_HEADER=x-csrf-token

# Admin write rate limiting
# GETTY_ENABLE_ADMIN_RL=1
# GETTY_ADMIN_RL_MAX=30
# GETTY_ADMIN_RL_WINDOW_MS=60000

# Audit append-only log for sensitive writes
# GETTY_ENABLE_AUDIT=1

# Allowed origins for potentially unsafe writes / embedding
# GETTY_ALLOWED_ORIGINS=https://youradmin.example,https://widgets.example

# WebSocket Origin allowlist
# GETTY_ALLOW_ORIGINS=https://yourdomain.com,https://admin.yourdomain.com

########################################
# Content-Security-Policy (CSP)
########################################

# Force enable/disable (otherwise on in production by default)
GETTY_ENABLE_CSP=1
# GETTY_ENABLE_CSP=0

# Extra directives (comma-separated lists)
# GETTY_CSP_CONNECT_EXTRA=https://sockety.odysee.tv
GETTY_CSP_CONNECT_EXTRA=https://arweave.net
# GETTY_CSP_SCRIPT_EXTRA=https://cdn.example.com
# GETTY_CSP_IMG_EXTRA=https://cdn.example.com
# GETTY_CSP_MEDIA_EXTRA=https://cdn.audio.com
GETTY_CSP_MEDIA_EXTRA=https://arweave.net

# Unsafe hashes flag adds 'unsafe-hashes' to script-src
# GETTY_CSP_UNSAFE_HASHES=0

# Inline script hashes (comma separated, no quotes)
# GETTY_CSP_SCRIPT_HASHES=

# script-src-attr override
# GETTY_CSP_SCRIPT_ATTR=

########################################
# Liveviews proxy (Odysee status)
########################################

# Cache TTL (ms) for live status proxy (default 10000)
# GETTY_LIVEVIEWS_TTL_MS=10000

# Optional rate limiting for the proxy
# GETTY_LIVEVIEWS_RL_ENABLED=1
# GETTY_LIVEVIEWS_RL_WINDOW_MS=60000
# GETTY_LIVEVIEWS_RL_MAX=120

########################################
# External notifications (optional)
########################################

# DISCORD_WEBHOOK=https://discord.com/api/webhooks/...
# TELEGRAM_BOT_TOKEN=123456:abc...
# TELEGRAM_CHAT_ID=123456789

########################################
# Supabase Storage (for file uploads)
########################################

# Supabase project URL (from your Supabase dashboard)
# SUPABASE_URL=https://your-project.supabase.co

########################################
# Chat (Odysee WebSocket)
########################################

# ODYSEE_WS_TEMPLATE=wss://sockety.odysee.tv/socket?name={channel}
# ODYSEE_WS_URL=wss://sockety.odysee.tv/socket?name=YourChannel
# ODYSEE_WS_ORIGIN=https://odysee.com

########################################
# Widgets: Arweave queries and timeouts
########################################

# TIP_WIDGET_EXTRA_GATEWAYS=https://arweave.net,https://ar-io.net
# TIP_WIDGET_GRAPHQL_TIMEOUT_MS=10000

# TIP_GOAL_EXTRA_GATEWAYS=https://arweave.net,https://ar-io.net
# TIP_GOAL_GRAPHQL_TIMEOUT_MS=10000

# LAST_TIP_EXTRA_GATEWAYS=https://arweave.net,https://ar-io.net
# LAST_TIP_GRAPHQL_TIMEOUT_MS=10000
# LAST_TIP_VIEWBLOCK_TIMEOUT_MS=6000

# VIEWBLOCK_API_KEY=your_key_here

########################################
# Social media embeds (security)
########################################

# SOCIALMEDIA_HTTPS_ONLY=true

########################################
# Stream history / analytics
########################################
# Stored in config/stream-history-config.json or Redis; no env required.

########################################
# Export / Import bundle
########################################
# (Wallet-only roadmap) Future endpoints may migrate from legacy /api/session/export.

########################################
# Masking behavior
########################################
# Controlled by trust + owner + relax flags above.

########################################
# Internationalization
########################################
# Auto-detected from browser; add locales in shared-i18n/.

########################################
# Recommended minimal hosted (wallet-only)
########################################
# NODE_ENV=production
# COOKIE_SECURE=1
# REDIS_URL=redis://redis:6379/0
# GETTY_MULTI_TENANT_WALLET=1
# GETTY_SESSION_SECRET=change-me
# WALLET_SESSION_TTL_SECONDS=86400
# GETTY_ENABLE_CSP=1
GETTY_STRICT_LOCAL_ADMIN=1
# GETTY_ENABLE_CSRF=1
GETTY_ENABLE_ADMIN_RL=1
# GETTY_ENABLE_AUDIT=1

########################################
# Local quickstart (wallet-only)
########################################
# NODE_ENV=development
# COOKIE_SECURE=0
# GETTY_MULTI_TENANT_WALLET=1
# GETTY_LOG_LEVEL=debug
# GETTY_SILENCE_404_TEST=1
GETTY_CHAT_AUTOSTART_TENANT=1
GETTY_ADMIN_REQUIRE_AUTH=1
GETTY_CSP_CONNECT_EXTRA=https://arweave.net
GETTY_CSP_MEDIA_EXTRA=https://arweave.net

########################################
# Logging & Debug
########################################
# GETTY_LOG_LEVEL=info        # info | debug | warn | error | silent
# GETTY_LOG_FORMAT=plain
# GETTY_WS_DEBUG_VERBOSE=0
# GETTY_KEEP_SRI_DEV=0
# GETTY_DEBUG_CONFIG=0

########################################
# Test Only Flags (DO NOT USE IN PROD)
########################################
# GETTY_WALLET_AUTH_ALLOW_DUMMY=1
# GETTY_SILENCE_REDIS_TEST=1
# GETTY_SILENCE_404_TEST=1
# GETTY_SILENCE_LEGACY_WALLET=1

########################################
# Legacy flags (removed from docs - ignored if set)
########################################
GETTY_REQUIRE_SESSION=1
# SESSION_TTL_SECONDS=259200
# GETTY_ALLOW_REMOTE_WRITES=1
# GETTY_DISABLE_LEGACY_SESSION=1

######################################################################
# End of file
######################################################################
